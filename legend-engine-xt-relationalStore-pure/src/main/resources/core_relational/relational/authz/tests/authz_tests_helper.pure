import meta::relational::tests::model::simple::*;
import meta::relational::mapping::*;
import meta::relational::runtime::*;
import meta::relational::tests::*;
import meta::relational::tests::*;
import meta::pure::runtime::*;
import meta::pure::mapping::*;


function meta::relational::authz::test::executeHelper(q: LambdaFunction<{->TabularDataSet[1]}>[1], r:Runtime[1], m:Mapping[1]):Result<TabularDataSet|1>[1]
{
  let result = execute(
      $q,
      //simpleRelationalMapping, 
      $m,
      //testRuntime(), 
      $r,
      meta::pure::router::extension::defaultRelationalExtensions()
  );

  //println($result);
  //println($result->sqlRemoveFormatting());
  //println($result.values.columns->map(r|$r.name->makeString('|'))->makeString(',') );
  
  $result;
}

/*
function meta::relational::authz::test::executeHelper(q: LambdaFunction<{->String[1]}>[1], r:Runtime[1], m:Mapping[1]):Any[1]
{
  let result = execute(
      $q,
      //simpleRelationalMapping, 
      $m,
      //testRuntime(), 
      $r,
      meta::pure::router::extension::defaultRelationalExtensions()
  );

  //println($result);
  //println($result->sqlRemoveFormatting());
  //println($result.values.columns->map(r|$r.name->makeString('|'))->makeString(',') );
  
  $result;
}
*/
